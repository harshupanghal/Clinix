@using Clinix.Application.DTOs
@inherits OwningComponentBase

<div class="appointment-card">
    <div class="header">
        <strong>@DisplayTitle</strong>
        <span class="status">@Appointment.Status</span>
    </div>
    <div class="body">
        <div>@Appointment.StartTime.ToString("ddd, dd MMM yyyy HH:mm") - @Appointment.EndTime.ToString("HH:mm")</div>
        <div>@(ShowPatient ? "Patient: " + Appointment.PatientName : "Doctor: " + Appointment.DoctorName)</div>
        @if (!string.IsNullOrEmpty(Appointment.Reason)) {<div>Reason: @Appointment.Reason</div>}
    </div>
    <div class="actions">
        @ChildContent
    </div>
</div>

@code {
    [Parameter] public AppointmentDetailsDto Appointment { get; set; } = null!;
    [Parameter] public bool ShowPatient { get; set; } = true;
    [Parameter] public RenderFragment? ChildContent { get; set; }

    string DisplayTitle => Appointment.Type ?? "Consultation";
}